<!DOCTYPE html>
<html lang="ja">

<head>
 <!-- Meta tags -->
 <meta charset="UTF-8">
 <title>アナザーエデンのプログラミングを個人サイトで試す</title>
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta name="description" content="アナザーエデンというスマートフォンゲームで使われているプログラミング言語をhtmlページで動作させてみました。">
 <meta name="keywords" content="プログラミング, アナザーエデン, Lua">
 <meta name="robots" content="index, follow">
 <meta property="og:title" content="アナザーエデンのプログラミングを個人サイトで試す">
 <meta property="og:description" content="アナザーエデンというスマートフォンゲームで使われているプログラミング言語をhtmlページで動作させてみました。">
 <meta property="og:image" content="/image/アナザーエデンのバディ_ピスケ.png">
 <meta property="og:url" content="https://feinatelier.org/contents/lua.html">
 <!-- Favicon -->
 <link rel="apple-touch-icon" sizes="180x180" href="/icons/appleicon.png">
 <link rel="icon" sizes="32x32" href="/favicon.ico" type="image/x-icon">
 <!-- Manifest -->
 <link rel="manifest" href="/manifest.json">
 <!-- CSS -->
 <link rel="stylesheet" href="/css/style.css">
 <link rel="stylesheet" href="/css/header.css">
 <link rel="stylesheet" href="/css/footer.css">
 <link rel="stylesheet" href="/css/flower.css">
 <link rel="stylesheet" href="/css/menu.css">
 <link rel="stylesheet" href="/css/feinpan.css">
 <link rel="stylesheet" href="/css/feinheadline1.css">
 <link rel="stylesheet" href="/css/lua.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link
  href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
  rel="stylesheet">
 <!-- Structured Data -->
 <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "アナザーエデンのプログラミングを個人サイトで試す",
    "url": "https://feinatelier.org/contents/lua.html",
    "logo": "https://feinatelier.org/image/barracuda.jpeg"
  }
  </script>
 <!-- JavaScript -->
 <script src="/script/underline.js"></script>
 <script src="/script/feinfade.js"></script>
 <script src="/script/feinScroll.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>
 <script src="/script/fengari-web.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-lua.min.js"></script>
 <!-- Analytics and Service Worker -->
 <script async src="https://www.googletagmanager.com/gtag/js?id=G-827JM6N5CS"></script>
 <script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'G-827JM6N5CS');
 </script>
 <script>
  (function (c, l, a, r, i, t, y) {
   c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
   t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
   y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
  })(window, document, "clarity", "script", "obazqypsh8");
 </script>
 <script>
  if ('serviceWorker' in navigator) {
   navigator.serviceWorker.register('/service-worker.js')
    .then(registration => {
     console.log('ServiceWorker registration successful with scope: ', registration.scope);
    })
    .catch(error => {
     console.log('ServiceWorker registration failed: ', error);
    });
  }
 </script>
</head>

<body>

 <nav class="den_nav">
  <ul>
   <li><a href="https://feinatelier.org/"><img src="/menu/mspass.webp" alt="このサイトのシンボルマーク" class="feinhome"></a></li>
   <li><a href="/" class="animated-link">ホーム</a></li>
   <li><a href="/another-eden/anaden_sitemap.html" class="animated-link">アナザーエデン</a></li>
   <li><a href="/fish/fish_sitemap.html" class="animated-link">アウトドアのエリア</a></li>
   <li><a href="/contents/site_create.html" class="animated-link">個人サイト制作</a></li>
   <li><a href="/contents/protect.html" class="animated-link">AI学習を防ぐ工夫</a></li>
   <li><a href="/contents/rss.html" class="animated-link">更新のお知らせ</a></li>
  </ul>
 </nav>

 <!--レスポンシブデザイン-->
 <div class="feincontainer">


  <!--パンくずリスト-->
  <div>
   <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/">Home（グラスタの場所一覧表〜入手範囲別〜）</a></li>
    <li class="breadcrumb-item"><a href="anaden_sitemap.html">アナザーエデン関連ページ・サイトマップ</a></li>
    <li class="breadcrumb-item active" aria-current="page">アナザーエデンのプログラミングを個人サイトで試す</li>
   </ol>
  </div>

  <div class="search-container">
   <script async src="https://cse.google.com/cse.js?cx=07df877a5cdad4ece">
   </script>
   <div class="gcse-searchbox-only"></div>
  </div>

  <!-- ハンバーガーメニュー -->
  <div class="fden-hamburger-menu">
   <button class="fden-hamburger-button" id="fden-hamburger-button" onclick="toggleMenu()">☰ メニューを開く
    ▼</button>
   <div class="fden-menu" id="fden-menu">
    <!-- メニュー内容は外部ファイルから読み込む -->
    <div id="fden-menu-content"></div>
   </div>
  </div>
  <script src="/script/menu.js"></script>
  <!-- ハンバーガーメニューここまで -->

  <!--サイトタイトル-->
  <div class="header-frame">
   <div class="header-container">
    <img src="/another-eden/anaimage/星４フィーネキャライラスト.png" alt="Fein Atelier - org" class="header-image">
    <div class="header-text">
     <a href="https://feinatelier.org/">Fein Atelier - org</a>
    </div>
   </div>
  </div>

  <div class="spacer"></div>
  <button id="generate-headings" data-open-text="アナザーエデンのプログラミングを個人サイトで試すの目次を開く ▼"
   data-close-text="アナザーエデンのプログラミングを個人サイトで試すの目次を閉じる ▲">アナザーエデンのプログラミングを個人サイトで試すの目次を開く ▼</button><!--目次の自動生成-->
  <div class="spacer"></div>
  <p>Luaコードによる成果物だけをご覧になりたい方は目次に★マークが付いている部分をタップしてください。<br>
   すぐにジャンプできますよ！</p>
  <p><a href="anaden_sitemap.html">アナザーエデン関連ページ・サイトマップへ戻る</a></p>

  <!-- ●ヘッダーここまで。直下でコンテンツ開始● -->

  <h1 class="background-waveimage-heading"><span>アナザーエデンのプログラミングを個人サイトで試す</span></h1>

  <div class="content">
   <img src="/another-eden/anaimage/16妖エリア地上疾走.jpg" alt="フィーネ・サキ・マユ・ノーナの疾走" class="graphicsaki right-image fade-in-out">

   <p>アナザーエデンで使われているLuaですが、これを静的Webサイトへ組み込んだうえで動作させることができないか、試してみました。<br>
    本来はこのような目的で使うものではないでしょうから、Webサイト制作やITの勉強という意味で考えれば、意義は薄いでしょう。<br>
    しかし、私が注目しているのは別のことです。<br>
    それは、自作コードによるWebサイトをやっている場合、このように様々なツール等を組み込めばいろんな言語に触れることができるという側面となります。</p>

   <p>ここでは<a
     href="https://github.com/fengari-lua/fengari">Fengari</a>を用いて、LuaによるUI（ユーザーインターフェース）をJavaScript経由で実装してみたいと思います。</p>

  </div>

  <h2>IT知識に関する推奨レベル</h2>
  <div class="content">
   <img src="/another-eden/anaimage/ASフィーネステータス画面.jpg" alt="ASフィーネステータス画面" class="graphicsaki right-image fade-in-out">
   <p>冒頭でまずお伝えすると、お勉強する意思がおありであれば、どなたでもチャレンジできます。<br>
    それを前提としてお話していきます。</p>

   <ul>
    <li>Webサイトの構造・公開方法の基礎的事項について把握しており、実際にやったことがある</li>
    <li>フロントエンド技術・バックエンド技術について基礎的な知識がある</li>
    <li>HTMLを読み書きできる</li>
    <li>CSSもある程度は調べながら書ける</li>
    <li>JavaScriptもある程度は調べながら書ける</li>
    <li>スマホではなく、パソコンないしはパソコン同等の機能を持つデバイスを持っている</li>
   </ul>
  </div>


  <p>注意して頂きたいのは一番初めの事項です。<br>
   「実際にやったことがある」という一文を馴染み深い言葉で言い変えると「HTMLでWebサイトを作ってサーバーにアップロードし、公開に成功したことがある」という意味です。<br>
   ホームページ作成サービスやブログ作成等は含みません。<br>
   WordPressでギリギリといったところ。<br>
   簡単なもので良いので、自らコードを全て記述し、Webサイトの形を構築したことがあるかどうか。<br>
   その経験の有無で成功率が変わってくるでしょう。</p>
  <p>では、始めます。</p>

  <h3>Fengariとは何か</h3>

  <div class="content">
   <img src="/another-eden/anaimage/天使の唄ASフィーネ.png" alt="天使の唄ASフィーネ" class="graphicsaki right-image fade-in-out">
   <p>FengariはJavaScriptで実装されたLuaの仮想マシン（VM）で、ブラウザ上でLuaのスクリプトを実行することができます。<br>
    これが何を意味するかというと、例えば次のような物語を語れるでしょう。</p>
   <ol>
    <li>html・cssは書けるが、JavaScriptは苦手という人がいる。でもLuaは得意。─ なかなか見ないパターンでしょうけど… ─</li>
    <li>その人は何かしら凝ったコンテンツを静的Webサイトに実装したいと考えている。</li>
    <li>この場合、Fengariを使えばLuaの知見を活かせるため、JavaScriptの学習コストを抑えることができる。</li>
   </ol>
   <p>おそらく、Fengariはトランススクリプトではないと思うんですよね。<br>
    トランススクリプトはあるプログラミング言語のコードを別の言語に変換するツールのことを指しますが、FengariはLuaコードをそのままJavaScript環境で動作させるためのエンジンと考えたほうが良いと思われます。<br>
    これを前提として、続けますね。</p>
  </div>


  <p>改めて、<a href="https://github.com/fengari-lua/fengari">Fengari</a>は上述のようにLuaプログラミング言語をJavaScript環境で実行するためのエンジンです。<br>
   LuaのインタープリタをJavaScriptで書き直したもので、ブラウザやNode.jsなどのJavaScript環境でLuaコードを実行できるようにしてくれる仕組みとなっています。</p>

  <h3>LuaのインタープリタをJavaScriptで書き直す</h3>
  <div class="content">
   <img src="/another-eden/anaimage/天使の唄ASフィーネ威力.png" alt="天使の唄ASフィーネ威力" class="graphicsaki right-image fade-in-out">
   <p>上述の説明をもうちょっと詳しく書きます。<br>
    「LuaのインタープリタをJavaScriptで書き直す」というのは、Luaの実行エンジンをJavaScriptで再実装するという作業になります。<br>
    Luaのバイトコードを解釈して実行する仮想マシン（VM）を、JavaScriptで作り直すという意味です。</p>
  </div>

  <p>調べたところでは、LuaコードはLuaインタープリタによって実行されるようです。<br>
   このインタープリタはC言語で書かれており、Luaコードをバイトコードにコンパイルし、そのバイトコードを実行します。<br>
   FengariはこのプロセスをJavaScriptで再現しているみたい。<br>
   つまり、LuaコードをJavaScript環境で直接実行できるようにするために、LuaのインタープリタをJavaScriptで実装しているということになるよね。</p>



  <div class="content">
   <img src="/another-eden/anaimage/ジオ・アンセム.jpg" alt="ジオ・アンセム" class="graphicsaki right-image fade-in-out">
   <p>この仕組みを使えば、ブラウザやNode.jsなどのJavaScript環境でLuaスクリプトを実行できるようになると考えました。<br>
    例えばWebアプリケーションでLuaを使いたい場合、Fengariを利用することで、特別な設定やコンパイルなしにLuaコードをそのまま動かすことができるのではないかと。</p>

   <p>まとめも兼ねて整理すると、Fengariの特徴は次のようになります。</p>
   <ul>
    <li>Luaと互換性があり、既存のLuaコードをそのまま使える</li>
    <li>JavaScriptエンジン上で動作するよう設計されている</li>
    <li>JavaScriptとLuaの間でデータをやり取りできるため、両言語の利点を活かした開発が可能</li>
   </ul>
   <p>おそらくFengariを使えば、WebアプリケーションやNode.jsアプリケーションにLuaを取り入れることができるでしょう。</p>
  </div>

  <p>ちなみにFengariは、巷でよく語られているところのJavaScriptライブラリではないと思われます。<br>
   例えば有名なjQueryは、主にWebページの操作やアニメーションを簡単にするためのライブラリです。<br>
   しかし上述のように、FengariはLuaプログラミング言語をJavaScript環境で実行するためのエンジンとなります。</p>

  <h4>ライブラリとエンジンの違い</h4>
  <div class="content">
   <img src="/another-eden/anaimage/ASフィーネ立ち絵.jpg" alt="ASフィーネ立ち絵" class="graphicsaki right-image fade-in-out">
   <p>ライブラリとエンジンの違いについて書いておきます。<br>
    これは基礎用語に該当するものだから、調べてもらえればたくさん事例が出てきますよ。<br>
    「ライブラリ」というのは、特定の機能や処理を簡単に利用できるようにまとめたコードの集まりです。<br>
    例えばjQueryはDOM操作やアニメーションを簡単にするためのJavaScriptライブラリです。<br>
    開発者が特定のタスクを効率的に行うためのツールキットのようなものと考えれば良いでしょう。<br>
    一方「エンジン」は、特定のタスクや一連のタスクを実行するための基盤となるソフトウェアと言えば良いでしょうか。<br>
    例えばゲームエンジンと呼ばれているものは、グラフィックス、物理演算、サウンドなどの機能を統合して、ゲームを動作させるための環境を提供します。<br>
    エンジンは、より大規模で複雑なシステムを構築するための基盤となるものですね。</p>
  </div>

  <p>まとめると、ライブラリは特定の機能を提供する部品の集まりであり、エンジンはその部品を使って動作するための基盤や環境を提供するものです。</p>

  <h5>ゲームエンジンについて調べてみる</h5>
  <div class="content">
   <img src="/another-eden/anaimage/ASノーナ・フィーネ乾杯.jpg" alt="ASノーナ・フィーネ乾杯" class="graphicsaki right-image fade-in-out">
   <p>私の分野ではないから細かくは書かないけど、Unity、Unreal Engine、Godot Engine、GameMaker Studio 2、CryEngineといろいろあるようです。<br>
    Luaはこれらのゲームエンジンではありませんが、Luaを使用するゲームエンジンを見つけました。<br>
    アナザーエデンの関連記事にもあったCocos2d-xですよ。<br>
    Cocos2d-xはC++とLuaをサポートしており、モバイルゲームの開発に広く使われているようですね。</p>
  </div>

  <p>このようにして、断片的な情報を繋いでいけます。<br>
   加えて、「CRIWARE」はゲームエンジンではなく、ゲーム開発向けのサウンドおよびムービーのミドルウェアのようです。<br>
   ゲーム内の音声や映像の処理を効率化し、品質を向上させるためのツールを提供しているみたい。</p>
  <p>これらのツールや仕組みを理解した上でプログラミング言語を操ることができれば、アナザーエデンみたいな凄いゲームを作ることができるのでしょう。<br>
   これはとっても大変なことだと思いますよ？</p>

  <h2>fengari-webの使用方法</h2>
  <div class="content">
   <img src="/another-eden/anaimage/猫マユ.png" alt="猫マユ" class="graphicsaki right-image fade-in-out">
   <p>まず、GitHubの<a
     href="https://github.com/fengari-lua/fengari-web/releases">fengari-webリリースページ</a>からfengari-web.jsをダウンロードします。<br>
    ダウンロードした後は各々のWebサイトにある適切なディレクトリに配置してください。</p>

   <p>ここで、GitHubの<a
     href="https://github.com/fengari-lua/fengari-web/releases">fengari-webリリースページ</a>にある各アセットの概略を書いておきます。
   </p>
  </div>

  <dl>
   <dt>fengari-web.bundle.js</dt>
   <dd>Fengariのすべての機能を1つのファイルにまとめたバンドル版です。<br>
    これを使うと、追加の依存関係なしにFengariを利用できます。</dd>
   <dt>fengari-web.bundle.js.map</dt>
   <dd>バンドル版のソースマップファイルです。<br>
    デバッグ時に元のソースコードを参照するために使用します。</dd>
   <dt>fengari-web.js</dt>
   <dd>Fengariの標準版です。<br>
    必要に応じて他のライブラリと組み合わせて使用することができます。</dd>
   <dt>fengari-web.js.map</dt>
   <dd>標準版のソースマップファイルです。<br>
    デバッグ時に元のソースコードを参照するために使用します。</dd>
   <dt>Source code</dt>
   <dd>リポジトリのソースコードをZIP形式またはTAR.GZ形式でダウンロードできます。<br>
    これを使ってローカルでビルドやカスタマイズが可能です。</dd>
  </dl>

  <div class="content">
   <img src="/another-eden/anaimage/コギトエルゴスム.jpg" alt="コギトエルゴスム" class="graphicsaki right-image fade-in-out">
   <p>これらのファイルを使って、Fengariをブラウザ上で実行したり、デバッグしたりするようです。<br>
    私もどこまで深入りするかは現段階で未定ですが、あるいは普通にJavaScriptを書くより、Luaを使った方がラクなUIがでてくるかもしれませんね？</p>
   <p>ただ…どうやらこれらのツールは2018年から更新がされていない様子。<br>
    それで良いものなのか、はたまた他にも実装ルートがあるのかは、今後の調査待ちということに致しましょう。
   <p>
  </div>


  <h3>fengari-web.jsをHTMLに組み込む理由</h3>

  <p>では、次にダウンロードしてきたfengari-web.jsをHTMLに組み込みます。</p>

  <p class="codegra">fengari-web.jsを組み込むhtmlコード</p>

  <div class="code-container">
   <pre><code class="feintyping language-html">
&lt;script src=&quot;/script/fengari-web.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;

</code></pre>
  </div>

  <div class="content">
   <img src="/another-eden/anaimage/マユの天アップの瞬間.jpeg" alt="マユの天アップの瞬間" class="graphicsaki right-image fade-in-out">
   <p>このようにしてfengari-web.jsをHTMLに組み込む理由は、ブラウザ上でLuaスクリプトを実行するためです。<br>
    これを作らないと静的Webサイトに表示できません。<br>
    加えて、私が使ってる環境がGoogle CloudのApp Engineなので、そのままではLuaを実行できないのです。<br>
    何かしら他のプロダクトを使うか、もしくは今やっているように他のプログラミング言語を経由するような方向にしないと、Webサイト上で形にできないんだよね。</p>
  </div>

  <p>fengari-web.jsをHTMLに組み込むと、次のような状況を自分のWebサイトで作り出すことができます。</p>

  <dl>
   <dt>Luaの実行環境が提供される</dt>
   <dd>上述しているように、fengari-web.jsはJavaScriptで実装されたLuaの仮想マシン（VM）です。<br>
    これをHTMLに組み込むことで、ブラウザ上でLuaコードを実行できる環境が提供されます。</dd>
   <dt>JavaScriptとの相互運用性が出てくる</dt>
   <dd>LuaスクリプトからJavaScriptのオブジェクトや関数にアクセスできます。<br>
    LuaとJavaScriptの間でデータをやり取りできます。</dd>
   <dt>ブラウザでデバッグできる</dt>
   <dd>
    ブラウザの開発者ツールを使ってLuaスクリプトのデバッグができます。<br>
    ソースマップファイル（.map）を使うと、元のLuaコードを参照しながらデバッグが可能みたいです。<br>
    開発者ツールはともかく、元のLuaの参照まで進むかどうかは今後によりますね。
   </dd>
   <dt>簡単なセットアップができる</dt>
   <dd>fengari-web.jsをHTMLに組み込むだけで、特別な設定やインストールなしにLuaスクリプトを実行できます。<br>
    これが一番大きいでしょう。<br>
    手軽にLuaの機能をウェブアプリケーションに追加できるのです。</dd>
  </dl>

  <p class="gra">参考サイト一覧</p>
  <p>勉強になりました。ありがとうございます。</p>
  <ul>
   <li><a href="https://www.wfs.games/blog/story/interview15/">エンジニア組織メンバーに聞く。技術力向上のための取り組み（WFS）</a></li>
   <li><a href="https://game.criware.jp/">CRIWARE公式サイト</a></li>
   <li><a href="https://www.cocos.com/en/cocos2d-x">Cocos2d-x公式サイト</a></li>
   <li><a href="https://github.com/fengari-lua/fengari-web/releases">fengari-lua／fengari-web（github）</a></li>
   <li><a href="https://ifritjp.github.io/documents/lua/fengari/">fengari の使い方 (Lua を Web ブラウザで動かす方法) ─ 公開技術情報 ─</a>
   </li>
   <li><a href="https://qiita.com/gp333/items/844149fa832d0b67c3b0">Lua言語を触ってみた（qiita）</a></li>
   <li><a href="https://qiita.com/iigura/items/855954ad000fe1da6c59">6 行の Lua プログラムで、Forth の内部インタプリタを作る（qiita）</a></li>
   <li><a href="https://plugout.hateblo.jp/entry/2020/02/17/013616">【Lua × JavaScript】Fengariのメモ（hateblo）</a></li>
  </ul>

  <h4>無料で「アナデンプログラミング体験」ができます</h4>
  <div class="content">
   <img src="/another-eden/anaimage/マユの天255ステータス画面.jpeg" alt="マユの天255ステータス画面"
    class="graphicsaki right-image fade-in-out">
   <p>このあたりまで調べたところで、おそらくやれるだろうと判断しました。<br>
    普通はやらないだろうけど、静的WebサイトでLuaの実行はできるのだから、Luaを書く体験ならできるだろうと。</p>
   <p>これでフルにJavaScriptを組むよりコードが読みやすいのであれば、Luaの力を借りて簡素なJavaScriptを追加してあげれば、いろんなUIの実装がラクになるのかもしれないと思ったのですよ。</p>
  </div>

  <p>それではいよいよ、Fengariを使ったLuaコードを紹介します。</p>

  <h2>★アナデンで使われているLuaの正常稼働に成功！</h2>
  <p>まずは完成形をお見せします。<br>
   これはボタンをタップすることで、外部サイトへのメニューが開くようになっています。</p>

  <div class="scoth-dropdown">
   <button onclick="toggleDropdown('menu1')">WFSゲームの公式サイトリスト</button>
   <div class="scoth-dropdown-content" id="menu1"></div>
  </div>

  <script>
   const luaCode1 = `
        local items = {
            {name = "アナザーエデン", link = "https://another-eden.jp/"},
            {name = "ヘブンバーンズレッド", link = "https://heaven-burns-red.com/"},
            {name = "WRIGHT FLYER STUDIOS", link = "https://www.wfs.games/"}
        }

        local dropdownHtml = ""
        for _, item in ipairs(items) do
            dropdownHtml = dropdownHtml .. '<a href="' .. item.link .. '">' .. item.name .. '</a>'
        end

        return dropdownHtml
    `;

   const L1 = fengari.load(luaCode1);
   const result1 = L1();

   document.getElementById('menu1').innerHTML = result1;

   function toggleDropdown(menuId) {
    var menu = document.getElementById(menuId);
    if (menu.style.display === "block") {
     menu.style.opacity = "0";
     setTimeout(function () {
      menu.style.display = "none";
     }, 500);
    } else {
     menu.style.display = "block";
     setTimeout(function () {
      menu.style.opacity = "1";
     }, 10);
    }
    event.stopPropagation();
   }

   document.addEventListener("click", function () {
    var menus = document.getElementsByClassName("scoth-dropdown-content");
    for (var i = 0; i < menus.length; i++) {
     if (menus[i].style.display === "block") {
      menus[i].style.opacity = "0";
      setTimeout(function (menu) {
       menu.style.display = "none";
      }, 500, menus[i]);
     }
    }
   });

   var dropdowns = document.getElementsByClassName('scoth-dropdown');
   for (var i = 0; i < dropdowns.length; i++) {
    dropdowns[i].addEventListener("click", function (event) {
     event.stopPropagation();
    });
   }
  </script>

  <p>Luaは初めて触れる言語ですが、１行１行見ていくと、身構えていたほど難解ではなさそうです。<br>
   でもこういうのが何百行何千行と重なっていくと、ものすごい大変になるんだよね…<br>
   ここではこういうテストしかやってないから、簡単に見えるだけでしょう。</p>

  <p>それではさっそく、htmlを含めて全体のコードを見ていきます。</p>

  <p class="codegra">HTMLにLuaを書く：プルダウンメニュー１</p>

  <div class="code-container">
   <pre><code class="feintyping language-html">
&lt;div class=&quot;scoth-dropdown&quot;&gt;
   &lt;button onclick=&quot;toggleDropdown(&#39;menu1&#39;)&quot;&gt;WFSゲームの公式サイトリスト&lt;/button&gt;
   &lt;div class=&quot;scoth-dropdown-content&quot; id=&quot;menu1&quot;&gt;&lt;/div&gt;
&lt;/div&gt;

 &lt;script&gt;
  const luaCode1 = `
       local items = {
           {name = &quot;アナザーエデン&quot;, link = &quot;https://another-eden.jp/&quot;},
           {name = &quot;ヘブンバーンズレッド&quot;, link = &quot;https://heaven-burns-red.com/&quot;},
           {name = &quot;WRIGHT FLYER STUDIOS&quot;, link = &quot;https://www.wfs.games/&quot;}
       }

       local dropdownHtml = &quot;&quot;
       for _, item in ipairs(items) do
           dropdownHtml = dropdownHtml .. &#39;&lt;a href=&quot;&#39; .. item.link .. &#39;&quot;&gt;&#39; .. item.name .. &#39;&lt;/a&gt;&#39;
       end

       return dropdownHtml
   `;

  const L1 = fengari.load(luaCode1);
  const result1 = L1();

  document.getElementById(&#39;menu1&#39;).innerHTML = result1;

  function toggleDropdown(menuId) {
   var menu = document.getElementById(menuId);
   if (menu.style.display === &quot;block&quot;) {
    menu.style.opacity = &quot;0&quot;;
    setTimeout(function () {
     menu.style.display = &quot;none&quot;;
    }, 500);
   } else {
    menu.style.display = &quot;block&quot;;
    setTimeout(function () {
     menu.style.opacity = &quot;1&quot;;
    }, 10);
   }
   event.stopPropagation();
  }

  document.addEventListener(&quot;click&quot;, function () {
   var menus = document.getElementsByClassName(&quot;scoth-dropdown-content&quot;);
   for (var i = 0; i &lt; menus.length; i++) {
    if (menus[i].style.display === &quot;block&quot;) {
     menus[i].style.opacity = &quot;0&quot;;
     setTimeout(function (menu) {
      menu.style.display = &quot;none&quot;;
     }, 500, menus[i]);
    }
   }
  });

  var dropdowns = document.getElementsByClassName(&#39;scoth-dropdown&#39;);
  for (var i = 0; i &lt; dropdowns.length; i++) {
   dropdowns[i].addEventListener(&quot;click&quot;, function (event) {
    event.stopPropagation();
   });
  }
 &lt;/script&gt;

</code></pre>
  </div>

  <p>私はLuaを初めて書くので、いろいろ誤りがあったり冗長であったりするかもしれません。<br>
   ただ、正常動作は確認できました。<br>
   可能な限り説明を試みます。</p>


  <h4>コード全体を優しい言葉で説明します</h4>
  <div class="content">
   <img src="/another-eden/anaimage/ASフィーネ勝利ポーズ.jpg" alt="ASフィーネ勝利ポーズ" class="graphicsaki right-image fade-in-out">
   <p>上記でお見せしたコードは、次のような感じで動作しているのですよ。</p>
   <p class="gra">簡単に一文で説明</p>
   <p>このコードはWebページに「WFSゲームの公式サイトリスト」というボタンを作ります。<br>
    ボタンを押すと、ゲームの公式サイトのリンクが表示される仕組みになっています。</p>

   <p class="gra">少し詳しい説明</p>

   <h5>HTML部分</h5>
   <ul>
    <li>buttonタグはボタンを作ります。このボタンをクリックすると、toggleDropdownという関数が動きます。</li>
    <li>divタグの中にゲームのリンクを入れるための箱を用意しています。</li>
   </ul>

   <h5>Lua部分</h5>
   <ul>
    <li>luaCode1という部分には、ゲームの名前とリンクがリストとして書かれています。</li>
    <li>luaCode1はLuaのコードを格納しており、この部分がLuaの使用箇所です。</li>
    <li>Luaのコードは、ゲームの名前とリンクをHTML形式の文字列として組み立てます。</li>
   </ul>

  </div>

  <h5>JavaScript部分</h5>
  <ul>
   <li>dropdownHtmlという変数に、Luaコードで生成されたリンクをHTML形式で入れていきます。</li>
   <li>最後に、準備したリンクをmenu1という箱に表示します。</li>
  </ul>

  <h5>関数の説明</h5>
  <ul>
   <li>toggleDropdown関数は、ボタンをクリックしたときにリンクのリストを表示したり隠したりします。リンクを表示するときは透明から見えるようになり、隠すときは見えなくなるようにします。</li>
   <li>document.addEventListenerという部分は、ページのどこかをクリックしたときにリストを自動で隠す機能です。</li>
  </ul>

  <p>Luaがどこで使われているかも含めて、ゲームのリンクを簡単に表示したり隠したりできるUIの説明を行いました。<br>
   次は個別にコードを見ながら、もうちょっと詳しく説明していこうと思います。</p>

  <h4>Luaコードの説明</h4>

  <p>冒頭でお見せした長いコードの中で、Luaの部分は少ないです。<br>
   しかし重要な役割を果たしています。<br>
   ひとまずLuaの部分だけ書いてみましょう。</p>

  <div class="code-container">
   <pre><code class="feintyping language-lua">
const luaCode1 = `
    local items = {
        {name = &quot;アナザーエデン&quot;, link = &quot;https://another-eden.jp/&quot;},
        {name = &quot;ヘブンバーンズレッド&quot;, link = &quot;https://heaven-burns-red.com/&quot;},
        {name = &quot;WRIGHT FLYER STUDIOS&quot;, link = &quot;https://www.wfs.games/&quot;}
    }

    local dropdownHtml = &quot;&quot;
    for _, item in ipairs(items) do
        dropdownHtml = dropdownHtml .. '&lt;a href=&quot;' .. item.link .. '&quot;&gt;' .. item.name .. '&lt;/a&gt;'
    end

    return dropdownHtml
`;
</code></pre>
  </div>

  <p>この部分がLuaのコードです。<br>
   今の私ではこのレベルが限界ですね…<br>
   本来ゲーム開発の現場でLuaはこういう使い方をされていないと思うし、他のセクションで書いている通り、実際はC/C++プログラムに組み込んで使われることが多いようです。</p>

  <div class="content">
   <img src="/another-eden/anaimage/フィーネとマリエル.jpg" alt="フィーネとマリエル" class="graphicsaki right-image fade-in-out">
   <dl>
    <dt>local items = {...}:</dt>
    <dd>ゲームの名前と公式サイトのリンクを持つテーブルを定義します。</dd>

    <dt>local dropdownHtml = "":</dt>
    <dd>空の文字列変数 dropdownHtml を定義します。</dd>

    <dt>for _, item in ipairs(items) do ... end:</dt>
    <dd>ループを使用して、items テーブル内の各エントリを処理します。</dd>

    <dt>dropdownHtml = dropdownHtml .. '&lt;a href="' .. item.link .. '"&gt;' .. item.name .. '&lt;/a&gt;':</dt>
    <dd>各アイテムのリンクをHTML形式で文字列に追加します。</dd>

    <dt>return dropdownHtml:</dt>
    <dd>最終的なHTML文字列を返します。</dd>
   </dl>
  </div>

  <p>HTMLにLuaを直接組み込んで使うことは珍しいはずですが、このように静的Webサイト内部での表示を通して学習目的として使うのも悪くないのでは？<br>
   今回の例のように、JavaScriptとの連携や特定のライブラリを使用してHTML内でLuaを実行することも可能です。<br>
   勉強すれば、もっといろんなことができるでしょう。</p>

  <p>コードの説明に戻ります。</p>
  <p>上記のLuaコードの後、JavaScriptの部分でこのLuaコードを実行し、生成されたHTMLをドロップダウンメニューに挿入する形としました。</p>

  <div class="code-container">
   <pre><code class="feintyping language-javascript">
const L1 = fengari.load(luaCode1);
const result1 = L1();

document.getElementById('menu1').innerHTML = result1;

</code></pre>
  </div>

  <p>この部分が、Luaで生成されたHTMLを「menu1」の内容として設定しています。<br>
   Luaの部分は短いものの、ドロップダウンメニューの内容を生成する役割を担っています。<br>
   次はJavaScript部分の説明ですね。</p>

  <h4>JavaScript部分の説明</h4>
  <p>
   fengari-web.jsを使うことでLuaコードが実行できるよう環境設定していますが、その後の長いJavaScriptはユーザーがボタンをクリックしたときにメニューを表示・非表示にする動作や、メニュー外をクリックしたときにメニューを閉じる動作を実現しています。<br>
   これらの部分はユーザーインターフェースの動作を制御するために書いたのですが、どうだろう…<br>
   全部Luaで制御することもできると思うんだけど、ちょっと今の私には厳しい…</p>

  <div class="code-container">
   <pre><code class="feintyping language-javascript">
 const L1 = fengari.load(luaCode1);
 const result1 = L1();

 document.getElementById(&#39;menu1&#39;).innerHTML = result1;

 function toggleDropdown(menuId) {
  var menu = document.getElementById(menuId);
  if (menu.style.display === &quot;block&quot;) {
   menu.style.opacity = &quot;0&quot;;
   setTimeout(function () {
    menu.style.display = &quot;none&quot;;
   }, 500);
  } else {
   menu.style.display = &quot;block&quot;;
   setTimeout(function () {
    menu.style.opacity = &quot;1&quot;;
   }, 10);
  }
  event.stopPropagation();
 }

 document.addEventListener(&quot;click&quot;, function () {
  var menus = document.getElementsByClassName(&quot;scoth-dropdown-content&quot;);
  for (var i = 0; i &lt; menus.length; i++) {
   if (menus[i].style.display === &quot;block&quot;) {
    menus[i].style.opacity = &quot;0&quot;;
    setTimeout(function (menu) {
     menu.style.display = &quot;none&quot;;
    }, 500, menus[i]);
   }
  }
 });

 var dropdowns = document.getElementsByClassName(&#39;scoth-dropdown&#39;);
 for (var i = 0; i &lt; dropdowns.length; i++) {
  dropdowns[i].addEventListener(&quot;click&quot;, function (event) {
   event.stopPropagation();
  });
 }
&lt;/script&gt;

</code></pre>
  </div>

  <dl>
   <dt>const L1 = fengari.load(luaCode1);:</dt>
   <dd>fengari.load関数を使って、luaCode1に書かれたLuaコードをJavaScriptで実行できる形に変換します。<br>
    この結果がL1に保存されます。</dd>

   <dt>const result1 = L1();:</dt>
   <dd>L1を呼び出してLuaコードを実行し、その結果をresult1に保存します。<br>
    この結果は、Luaコードが生成したHTML文字列です。</dd>

   <dt>document.getElementById('menu1').innerHTML = result1;:</dt>
   <dd>menu1というIDを持つHTML要素を取得し、その中身をresult1の内容に置き換えます。<br>
    この段階を踏むことで、生成されたHTMLがドロップダウンメニューとして表示されます。</dd>
  </dl>

  <div class="content">
   <img src="/another-eden/anaimage/アップフィーネ.jpg" alt="アップフィーネ" class="graphicsaki right-image fade-in-out">
   <dl>
    <dt>function toggleDropdown(menuId) { ... }:</dt>
    <dd>toggleDropdownという関数を定義しています。<br>
     この関数は、渡されたID (menuId) を持つメニューの表示・非表示を切り替えます。</dd>

    <dt>var menu = <br>document.<br>getElementById(menuId);:</dt>
    <dd>menuIdで指定されたIDを持つHTML要素を取得します。</dd>

    <dt>if (menu.style.display === "block") { ... } else { ... }:</dt>
    <dd>メニューが表示されているかどうかをチェックします。<br>
     表示されている場合は非表示にし、表示されていない場合は表示するように切り替えます。</dd>

    <dt>menu.style.opacity = "0";:</dt>
    <dd>メニューの透明度を0に設定して非表示にします。</dd>

    <dt>setTimeout(function () { menu.style.display = "none"; }, 500);:</dt>
    <dd>500ミリ秒（0.5秒）後にメニューの表示スタイルをnoneに設定して、完全に非表示にします。</dd>

    <dt>menu.style.display = "block";:</dt>
    <dd>メニューの表示スタイルをblockに設定して表示します。</dd>

    <dt>setTimeout(function () { menu.style.opacity = "1"; }, 10);:</dt>
    <dd>10ミリ秒後にメニューの透明度を1に設定して表示します。</dd>

    <dt>event.stopPropagation();:</dt>
    <dd>クリックイベントが親要素に伝播するのを防ぎます。</dd>

    <dt>document.addEventListener("click", function () { ... });:</dt>
    <dd>ページ全体にクリックイベントリスナーを追加します。<br>
     このリスナーは、メニュー外のどこかがクリックされたときにメニューを非表示にします。</dd>

    <dt>var menus = document.getElementsByClassName("scoth-dropdown-content");:</dt>
    <dd>scoth-dropdown-contentというクラス名を持つすべてのHTML要素を取得します。</dd>

    <dt>for (var i = 0; i &lt; menus.length; i++) { ... }:</dt>
    <dd>すべてのメニュー要素に対して、以下の処理を繰り返します。</dd>

    <dt>if (menus[i].style.display === "block") { ... }:</dt>
    <dd>メニューが表示されている場合、以下の処理を行います。</dd>

    <dt>menus[i].style.opacity = "0";:</dt>
    <dd>メニューの透明度を0に設定して非表示にします。</dd>

    <dt>setTimeout(function (menu) { menu.style.display = "none"; }, 500, menus[i]);:</dt>
    <dd>500ミリ秒後にメニューの表示スタイルをnoneに設定して、完全に非表示にします。</dd>

    <dt>var dropdowns = document.getElementsByClassName('scoth-dropdown');:</dt>
    <dd>scoth-dropdownというクラス名を持つすべてのHTML要素を取得します。</dd>

    <dt>for (var i = 0; i &lt; dropdowns.length; i++) { ... }:</dt>
    <dd>すべてのドロップダウン要素に対して、以下の処理を繰り返します。</dd>

    <dt>dropdowns[i].addEventListener("click", function (event) { event.stopPropagation(); });:</dt>
    <dd>ドロップダウン要素内のクリックイベントでイベントの伝播を停止し、メニュー内のクリックがメニュー外のクリックと誤認されないようにします。</dd>
   </dl>
  </div>

  <div class="content">
   <img src="/another-eden/anaimage/天使の唄フィーネ直前.jpg" alt="天使の唄フィーネ直前" class="graphicsaki right-image fade-in-out">
   <p>あれ？<br>
    ていうか、結局JavaScriptを使ってないか？<br>
    Luaでやり切れるのか調べてみたけど、まぁそもそもこうやって実装するもんじゃないしねー<br>
    私がこうして静的Webサイトをホスティングしているから環境を作れるというだけで、本来であれば、アナザーエデンみたいなアプリを作るための言語なんでしょう。<br>
    まぁ、ちょっとしたWeb開発系のジョークだよね😆ww</p>
  </div>

  <h3>JavaScriptのイベントリスナーとは</h3>
  <p>
   イベントリスナーは、JavaScriptの中で特定のイベントが発生したときに実行される関数のことを指します。<br>
   イベントには、ユーザーがボタンをクリックする、マウスを動かす、キーを押す、ページが読み込まれるなど、さまざまな種類があります。<br>
   イベントリスナーを使うことで、JavaScriptはこれらのイベントに反応して特定の動作を実行することができます。<br>
   例えば、ユーザーがボタンをクリックしたときに、何かの処理を行いたい場合にイベントリスナーを使います。<br>
   簡単な例を見てみましょう。</p>

  <p class="gra">イベントリスナーの例：html</p>
  <div class="code-container">
   <pre><code class="feintyping language-html">
&lt;button id=&quot;myButton&quot;&gt;クリックしてね！&lt;/button&gt;

</code></pre>
  </div>

  <p class="gra">イベントリスナーの例：JavaScript</p>
  <div class="code-container">
   <pre><code class="feintyping language-javascript">
// ボタン要素を取得
var button = document.getElementById("myButton");

// イベントリスナーを追加
button.addEventListener("click", function() {
alert("ボタンがクリックされました！");
});

</code></pre>
  </div>

  <p>この例にあるJavaScriptは、次のような流れで動作しています。</p>

  <dl>
   <dt>ボタン要素を取得</dt>
   <dd><code>document.getElementById("myButton")</code> を使って、HTML内のボタン要素を取得します。</dd>

   <dt>イベントリスナーを追加</dt>
   <dd><code>button.addEventListener("click", function() {...})</code> を使って、ボタンに「クリック」イベントリスナーを追加します。</dd>

   <dt>イベントが発生したときの処理</dt>
   <dd>ボタンがクリックされたときに、指定された関数（この場合は、アラートを表示する処理）が実行されます。</dd>
  </dl>

  <div class="content">
   <img src="/another-eden/anaimage/フィーネCC直前１.png" alt="フィーネCC直前１" class="graphicsaki right-image fade-in-out">
   <p>こういうのがイベントリスナーの基本的な仕組みです。<br>
    イベントリスナーを使用することで、ユーザーの操作に応じて動的に反応するWebページを作成することができます。<br>
    JavaScriptがホームページの動作を制御するとよく言われるのは、こういった部分から来ています。</p>
  </div>


  <h4>CSSの説明</h4>

  <div class="content">
   <img src="/paint/ascatwallpaper.jpeg" alt="ASねここの壁紙" class="wallpaper right-image fade-in-out">

   <p>ちょっと長すぎるなーと思ってCSSは省略していたのですが…<br>
    せっかくだから解説を付けましょうか！<br>
    CSSは必須ではないんだけど、書けるのと書けないのとでは、やっぱりデザインの幅が違います。<br>
    プルダウンメニューが滑らかに表示されるアニメーションだってcssで制御しているのですよ。<br>
    思い付く限りで書いてみますね。</p>

   <dl>
    <dt>デザインの制御</dt>
    <dd>ウェブページの見た目（色、レイアウト、フォントなど）を細かく制御できない。</dd>

    <dt>レスポンシブデザイン</dt>
    <dd>画面サイズに応じてレイアウトを変更するレスポンシブデザインが難しい。</dd>

    <dt>ユーザー体験の向上</dt>
    <dd>ユーザーが快適に利用できるインターフェースを作成するのが困難になる。</dd>

    <dt>スタイルの統一</dt>
    <dd>複数のページで一貫したデザインを保つのが難しい。</dd>

    <dt>維持と管理</dt>
    <dd>大規模なサイトでのデザイン変更が手間になる。</dd>
   </dl>

   <p>いろんな意見があるのですが、特に「複数のページで一貫したデザインを保つ」というのが重要な側面かと思います。<br>
    これはhtmlだけでもできないことはないのですが、cssを使うと簡単になります。<br>
    どこかでまとめて指定しておけば、他も全て同じになるんだよね。</p>

  </div>

  <p>さっそくコードを見てみましょう。</p>

  <p class="codegra" id="lua_css">Luaによるプルダウンメニューをサポートするlus.css</p>
  <div class="code-container">
   <pre><code class="feintyping language-css">
/* lua.css */
/* ドロップダウンメニューのスタイルを定義 */
.scoth-dropdown {
 position: relative; /* 親要素に対する位置を相対的に設定 */
 display: inline-block; /* インラインブロック要素として表示（要素が並んで表示される） */
}

/* ドロップダウンメニューのコンテンツのスタイル */
.scoth-dropdown-content {
 display: none; /* デフォルトでは非表示にする */
 position: absolute; /* 親要素に対して絶対位置を設定 */
 background-color: #f9f9f9; /* 背景色を薄いグレーに設定 */
 box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2); /* ボックスシャドウを設定し、浮き上がるように見せる */
 z-index: 1; /* 重なり順序を設定（他の要素より前面に表示） */
 white-space: nowrap; /* テキストを折り返さずに表示 */
 opacity: 0; /* 透明度を0に設定（表示されない状態） */
 transition: opacity 0.5s; /* 透明度の変化を0.5秒間でアニメーションさせる */
}

/* ドロップダウンメニュー内のリンクのスタイル */
.scoth-dropdown-content a {
 color: #0078D4; /* リンクの文字色を青に設定 */
 padding: 12px 16px; /* リンクの内側に余白を設定 */
 text-decoration: none; /* リンクの下線を消す */
 display: block; /* ブロック要素として表示（縦に並ぶ） */
}

/* リンクにホバーしたときのスタイル */
.scoth-dropdown-content a:hover {
 background-color: #f1f1f1; /* 背景色を薄いグレーに変更 */
}

/* ドロップダウンメニューを開くボタンのスタイル */
.scoth-dropdown button {
 background-color: rgba(85, 139, 47, 0.5); /* ボタンの背景色を半透明の緑に設定 */
 color: #000000; /* 文字色を黒に設定 */
 padding: 8px 15px; /* ボタン内の余白を設定 */
 border: 2px solid #558b2f; /* ボタンの外枠を設定 */
 border-radius: 5px; /* ボタンの角を丸くする */
 cursor: pointer; /* マウスポインタを指示棒に変更 */
 font-size: 14px; /* 文字のサイズを設定 */
 transition: background-color 0.3s, box-shadow 0.3s; /* 背景色とボックスシャドウの変化を0.3秒間でアニメーションさせる */
}

/* ボタンにホバーしたときのスタイル */
.scoth-dropdown button:hover {
 background-color: rgba(107, 142, 35, 0.7); /* 背景色を少し濃い緑に変更 */
 box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* ボックスシャドウを設定し、浮き上がるように見せる */
}

/* ボタンにフォーカスが当たったときのスタイル */
.scoth-dropdown button:focus {
 outline: none; /* ボタンのデフォルトのフォーカス枠を消す */
 box-shadow: 0 0 0 3px rgba(85, 139, 47, 0.5); /* 緑の枠を表示し、フォーカスされていることを示す */
}
</code></pre>
  </div>

  <p>Luaはさすがに特別な事例ですが、html・css・JavaScriptの３つは基本の部分なんですよね。<br>
   でも基本と言いつつ、深みに行くと非常に難しくなります。<br>
   そこそこレベルでいいからこの３つを書ければ、自分でプラットフォームを作ることができるってこと。</p>

  <h2>★最高難易度コンテンツ：アナデン開発に使われているLuaコードを書く！</h2>
  <p>これはさっきのゲーム公式リンク集と同じコードですよ。<br>
   同一Webページ内に２つ以上のリストを置くから、IDをmenu1とmenu2に分けているというだけです。</p>


  <div class="scoth-dropdown">
   <button onclick="toggleDropdown('menu2')">フロントエンド技術とLuaの公式サイトリスト</button>
   <div class="scoth-dropdown-content" id="menu2"></div>
  </div>

  <script>
   const luaCode2 = `
        local items = {
            {name = "World Wide Web Consortium", link = "https://www.w3.org/"},
            {name = "開発者向けのウェブ技術（JavaScript）", link = "https://developer.mozilla.org/ja/docs/Web/JavaScript"},
            {name = "Lua", link = "https://www.lua.org/"}
        }

        local dropdownHtml = ""
        for _, item in ipairs(items) do
            dropdownHtml = dropdownHtml .. '<a href="' .. item.link .. '">' .. item.name .. '</a>'
        end

        return dropdownHtml
    `;

   const L2 = fengari.load(luaCode2);
   const result2 = L2();

   document.getElementById('menu2').innerHTML = result2;

   function toggleDropdown(menuId) {
    var menu = document.getElementById(menuId);
    if (menu.style.display === "block") {
     menu.style.opacity = "0";
     setTimeout(function () {
      menu.style.display = "none";
     }, 500);
    } else {
     menu.style.display = "block";
     setTimeout(function () {
      menu.style.opacity = "1";
     }, 10);
    }
    event.stopPropagation();
   }

   document.addEventListener("click", function () {
    var menus = document.getElementsByClassName("scoth-dropdown-content");
    for (var i = 0; i < menus.length; i++) {
     if (menus[i].style.display === "block") {
      menus[i].style.opacity = "0";
      setTimeout(function (menu) {
       menu.style.display = "none";
      }, 500, menus[i]);
     }
    }
   });

   var dropdowns = document.getElementsByClassName('scoth-dropdown');
   for (var i = 0; i < dropdowns.length; i++) {
    dropdowns[i].addEventListener("click", function (event) {
     event.stopPropagation();
    });
   }
  </script>

  <p>Luaの公式サイト、オシャレですね！<br>
   加えて、ここで表示している「World Wide Web Consortium」と「開発者向けのウェブ技術」というWebサイトは、Web制作をしている人たちにとって馴染み深いものとなっています。<br>
   特にWorld Wide Web Consortium、略してW3Cはいろんな教科書に掲載されている団体ですよ？</p>


  <h4>Luaの実行環境を実装できたことになる</h4>
  <div class="content">
   <img src="/another-eden/anaimage/星５フィーネキャライラストヘッダー.png" alt="星５フィーネキャライラストヘッダー"
    class="graphicsaki right-image fade-in-out">
   <p>これにて、当WebサイトにLuaの実行環境が実装されました。<br>
    今後はいろんなページで使用可能です。<br>
    せっかく良い感じのプルダウンメニューができたので、必要なポイントで導入していくと良さそう。<br>
    公式リンクというのはやたらと宣伝するようなものではありませんし、こうやって控えめに、でもユーザーがそれと分かるようなUIで添付していくつもり。</p>
  </div>

  <p class="codegra">HTMLにLuaを書く：プルダウンメニュー２</p>
  <div class="code-container">
   <pre><code class="feintyping language-html">
&lt;div class=&quot;scoth-dropdown&quot;&gt;
   &lt;button onclick=&quot;toggleDropdown('menu2')&quot;&gt;フロントエンド技術とLuaの公式サイトリスト&lt;/button&gt;
   &lt;div class=&quot;scoth-dropdown-content&quot; id=&quot;menu2&quot;&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
   // 技術サイトの名前とリンクのリストをLuaコードとして用意します
   const luaCode2 = `
        local items = {
            {name = &quot;World Wide Web Consortium&quot;, link = &quot;https://www.w3.org/&quot;},
            {name = &quot;開発者向けのウェブ技術（JavaScript）&quot;, link = &quot;https://developer.mozilla.org/ja/docs/Web/JavaScript&quot;},
            {name = &quot;Lua&quot;, link = &quot;https://www.lua.org/&quot;}
        }

        local dropdownHtml = &quot;&quot;
        for _, item in ipairs(items) do
            dropdownHtml = dropdownHtml .. '&lt;a href=&quot;' .. item.link .. '&quot;&gt;' .. item.name .. '&lt;/a&gt;'
        end

        return dropdownHtml
    `;

   // LuaのコードをJavaScriptで実行して、結果を取得します
   const L2 = fengari.load(luaCode2);
   const result2 = L2();

   // 取得した結果をHTMLのmenu2というIDの箱に表示します
   document.getElementById('menu2').innerHTML = result2;

   // ボタンをクリックすると、表示するか隠すかを切り替える関数です
   function toggleDropdown(menuId) {
    var menu = document.getElementById(menuId);
    if (menu.style.display === &quot;block&quot;) {
     // 表示されている場合は、透明にして隠します
     menu.style.opacity = &quot;0&quot;;
     setTimeout(function () {
      menu.style.display = &quot;none&quot;;
     }, 500);
    } else {
     // 表示されていない場合は、透明から見えるようにします
     menu.style.display = &quot;block&quot;;
     setTimeout(function () {
      menu.style.opacity = &quot;1&quot;;
     }, 10);
    }
    event.stopPropagation();
   }

   // ページのどこかをクリックしたときに、リストを自動で隠す機能です
   document.addEventListener(&quot;click&quot;, function () {
    var menus = document.getElementsByClassName(&quot;scoth-dropdown-content&quot;);
    for (var i = 0; i &lt; menus.length; i++) {
     if (menus[i].style.display === &quot;block&quot;) {
      menus[i].style.opacity = &quot;0&quot;;
      setTimeout(function (menu) {
       menu.style.display = &quot;none&quot;;
      }, 500, menus[i]);
     }
    }
   });

   // ドロップダウンをクリックしてもイベントが伝播しないようにします
   var dropdowns = document.getElementsByClassName(&quot;scoth-dropdown&quot;);
   for (var i = 0; i &lt; dropdowns.length; i++) {
    dropdowns[i].addEventListener(&quot;click&quot;, function (event) {
     event.stopPropagation();
    });
   }
&lt;/script&gt;

</code></pre>
  </div>

  <h4>Luaコードを試した感想</h4>
  <div class="content">
   <img src="/another-eden/anaimage/ASフィーネ僥倖.jpg" alt="ASフィーネ僥倖" class="graphicsaki right-image fade-in-out">
   <p>いくらWeb制作に慣れているとは言え、このクラスまで来るとちょっと息苦しいですね😵‍💫<br>
    特にLuaなんてアナザーエデンをプレイしていなければ出逢えなかった言語でしょうし、初めて触りました。<br>
    でも何とか…こうした簡素なプルダウンメニューくらいなら実装できたということになります。<br>
    とても良い勉強になりましたよ。<br>
    これだけでもアナザーエデンと出逢えた価値があるというもの。<br>
    JavaScriptのエンジンを経由して、本来であればフロントエンド技術とはならない言語を静的Webサイトで動作させる試み。<br>
    これは今後の私のWeb制作活動にとって、極めて大きなコード資産となります。<br>
    有益な形が残る学びの機会が与えられたこと、深く感謝申し上げます。</p>
  </div>

  <h3>次回予告…</h3>
  <div class="content">
   <img src="/another-eden/anaimage/アニメフィーネ.jpg" alt="アニメフィーネ" class="graphicsaki right-image fade-in-out">
   <p>まだ明確には決めてないんですけどね。<br>
    このLuaについて調べている過程でいろんな知見を得ました。<br>
    もしくは思い出しました。<br>
    アナザーエデンとてLuaだけで書かれているわけではありませんし、今後もいろんな言語ネタをやってみるのもおもしろいですよね。<br>
    もしくはLuaでもっといろいろ実装してみるか。<br>
    Luaのほうが簡単ないしは手間がかからないかな？</p>
  </div>
  <p>まぁまぁ🎵<br>
   少なくとも、すでにLuaの実行環境は構築したわけですから。<br>
   今後も手持ち資料の発掘状況次第で、いろーんな個人サイトネタを書いていきましょう！</p>

  <!-- ●ここから人間用のフッター● -->
  <hr id="feinhr">
  <div class="spacer"></div>

  <section class="sitemap">
   <h2 class="sitemap_heading">サイトマップ</h2>
   <p><a href="/another-eden/anaden_sitemap.html"><i class="fas fa-sitemap"></i>
     アナザーエデン関連ページ・サイトマップ</a></p>
   <p>アナザーエデンの強敵戦やストーリーコンテンツのリスト、お勧めバッジなどを掲載したコーナーです。<br>
    期間限定のない普通のRPGですので、初心者でも安心して続けていけるゲームとなっています。<br>
    もっとも重要なグラスタについては、場所別に網羅した表があります。</p>


   <div class="spacer"></div>
   <p><a href="/contents/site_create.html"><i class="fas fa-sitemap"></i>
     個人サイトのホスティングとコンテンツ作成</a></p>
   <p>個人でウェブサイトを作るにはどうすればいいか。<br>
    HTML・CSS・JavaScriptの書き方はもちろん、無料かつ広告なしでホームページを作る方法を掲載したコーナーです。<br>
    Webデザインやレイアウトについても書いてあります。</p>
   <div class="spacer"></div>
   <p><a href="/fish/fish_sitemap.html"><i class="fas fa-sitemap"></i>魚釣りなどアウトドアのエリア</a></p>
   <p>ゲームとパソコンだけじゃなく、アウトドアも趣味なんです。<br>
    このコーナーでは魚釣りの記録とか、魚料理のレシピ、はたまたサイクリングなどなど。<br>
    アウトドアに関連するコンテンツが詰め込まれています。</p>

  </section>

  <!-- ページ上部へ戻るボタン -->
  <button id="scrollToTopBtn" onclick="scrollToTop()">ページ上部へ戻る</button>
  <script src="/script/feinScroll.js"></script>

  <div class="spacer"></div>

  <footer>
   <!--common google digital leader-->

   <div id="commongdl"></div>
   <script src="/externalization/common.js"></script>

   <div class="spacer"></div>

   <!--w3cバリデーターに合格していることを示す-->
   <div class="w3ccheck">
    <a href="https://validator.w3.org/nu/?doc=https://feinatelier.org/contents/lua.html">
     <img src="/image/HTML5_Logo_64.png" alt="Valid HTML5" height="31" style="width: auto;">
    </a>
    <a href="https://validator.w3.org/nu/?doc=https://feinatelier.org/css/style.css">
     <img style="border:0;width:88px;height:31px" src="/image/vcss-blue.png" alt="正当なCSSです!">
    </a>
   </div>
   <!--w3cバリデーターに合格していることを示す-->

   <div class="spacer"></div>
   <p class="portal" id="updated-date">この <a href="https://feinatelier.org/">fein's personal
     site</a> は、2023/7/4に開設された <a href="https://portal.feinatelier.org/">fein's portal</a>
    を母体として、yyyy/mm/ddに至るまで更新し続けられています。</p>
   <script>
    document.addEventListener('DOMContentLoaded', function () {
     const today = new Date();
     const year = today.getFullYear();
     const month = String(today.getMonth() + 1).padStart(2, '0');
     const day = String(today.getDate()).padStart(2, '0');
     const dateElement = document.getElementById('updated-date');
     dateElement.innerHTML = `この <a href="https://feinatelier.org/">Fein Atelier - org</a> は、2023/7/4に開設された <a href="https://portal.feinatelier.org/">fein's portal</a> を母体として、${year}/${month}/${day}に至るまで更新し続けられています。`;
    });
   </script>

  </footer>

 </div><!--レスポンシブデザイン-->

 <script src="/script/feinheadline1.js"></script><!--見出しの自動生成-->

 <!-- ●ここまで人間用のフッター。直下でbodyを閉める● -->
</body>

</html>
