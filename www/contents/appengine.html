<!DOCTYPE html>
<!-- ●ここから人間用のヘッダー● -->
<html lang="ja">

<head>
 <link rel="manifest" href="/manifest.json">

 <script>
  if ('serviceWorker' in navigator) {
   navigator.serviceWorker.register('/service-worker.js')
    .then(registration => {
     console.log('ServiceWorker registration successful with scope: ', registration.scope);
    })
    .catch(error => {
     console.log('ServiceWorker registration failed: ', error);
    });
  }
 </script>

 <!-- Google tag (gtag.js) -->
 <script async src="https://www.googletagmanager.com/gtag/js?id=G-827JM6N5CS"></script>
 <script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-827JM6N5CS');
 </script>

 <!-- Microsoft tag -->
 <script>
  (function (c, l, a, r, i, t, y) {
   c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
   t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
   y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
  })(window, document, "clarity", "script", "obazqypsh8");
 </script>

 <meta charset="UTF-8">


 <!--基本のメタタグ-->
 <meta name="description" content="個人サイトを作ろうとすると障害になるのが、業者が強制的に挿入してくる広告です。そんなものを使わずとも、Google App Engineなら広告なしで作れます。">
 <meta name="keywords" content="個人サイト, Google App Engine, 広告なし">
 <meta name="robots" content="index, follow">
 <meta property="og:title" content="Google App Engineで広告なしサイト作成">
 <meta property="og:description"
  content="個人サイトを作ろうとすると障害になるのが、業者が強制的に挿入してくる広告です。そんなものを使わずとも、Google App Engineなら広告なしで作れます。">
 <meta property="og:image" content="../image/アナザーエデンのバディ_ピスケ.png">
 <meta property="og:url" content="https://feinatelier.org/contents/appengine.html">

 <!--検索ヒット時のアイコン-->
 <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Google App Engineで広告なしサイト作成",
  "url": "https://feinatelier.org/contents/appengine.html",
  "logo": "https://feinatelier.org/image/barracuda.jpeg"
}
</script>

 <!--レスポンシブデザイン-->
 <meta name="viewport" content="width=device-width, initial-scale=1.0">

 <!--CSS-->
 <link rel="stylesheet" type="text/css" href="/css/style.css">
 <link rel="stylesheet" type="text/css" href="/css/header.css">
 <link rel="stylesheet" type="text/css" href="/css/footer.css">
 <link rel="stylesheet" type="text/css" href="../css/menu.css">
 <link rel="stylesheet" type="text/css" href="../css/feinpan.css">
 <link rel="stylesheet" type="text/css" href="../css/feinheadline1.css">
 <link rel="stylesheet" type="text/css" href="../css/flower.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-tomorrow.min.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

 <!--JavaScript-->
 <script src="../script/underline.js"></script>
 <script src="../script/feinfade.js"></script>
 <script src="../script/feinScroll.js"></script>
 <!-- gsapの読み込み -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>
 <!-- prismの読み込み -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-bash.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-python.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-yaml.min.js"></script>

 <!-- google fonts -->
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link
  href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
  rel="stylesheet">

 <!--ページタイトル-->
 <title>Google App Engineで広告なしサイト作成</title>

 <!--ASノーナのファビコン-->
 <link rel="icon" sizes="32x32" href="../favicon.ico" type="image/x-icon">
 <link rel="apple-touch-icon" sizes="180x180" href="/icons/appleicon.png">
</head>

<body>

 <nav class="den_nav">
  <ul>
   <li><a href="https://feinatelier.org/"><img src="/menu/mspass.png" alt="このサイトのシンボルマーク" class="feinhome"></a></li>
   <li><a href="/" class="animated-link">ホーム</a></li>
   <li><a href="/another-eden/anaden_sitemap.html" class="animated-link">アナザーエデン</a></li>
   <li><a href="/fish/fish_sitemap.html" class="animated-link">アウトドアのエリア</a></li>
   <li><a href="/contents/site_create.html" class="animated-link">個人サイト制作</a></li>
   <li><a href="/contents/protect.html" class="animated-link">AI学習を防ぐ工夫</a></li>
   <li><a href="/contents/rss.html" class="animated-link">更新のお知らせ</a></li>
  </ul>
 </nav>

 <!--レスポンシブデザイン-->
 <div class="feincontainer">

  <!--パンくずリスト-->
  <div>
   <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/">Home（グラスタの場所一覧表〜入手範囲別〜）</a></li>
    <li class="breadcrumb-item"><a href="site_create.html">個人サイト制作：サイトマップ</a></li>
    <li class="breadcrumb-item active" aria-current="page">Google App Engineで広告なしサイト作成</li>
   </ol>
  </div>

  <div class="search-container">
   <script async src="https://cse.google.com/cse.js?cx=07df877a5cdad4ece">
   </script>
   <div class="gcse-searchbox-only"></div>
  </div>

  <!-- ハンバーガーメニュー -->
  <div class="fden-hamburger-menu">
   <button class="fden-hamburger-button" id="fden-hamburger-button" onclick="toggleMenu()">☰ メニューを開く ▼</button>
   <div class="fden-menu" id="fden-menu">
    <!-- メニュー内容は外部ファイルから読み込む -->
    <div id="fden-menu-content"></div>
   </div>
  </div>
  <script src="../script/menu.js"></script>
  <!-- ハンバーガーメニューここまで -->

  <!--サイトタイトル-->
  <div class="header-frame">
   <div class="header-container">
    <img src="../image/cloudsitetitle.jpg" alt="fein's personal site" class="header-image">
    <div class="header-text">
     <a href="https://feinatelier.org/">fein's personal site</a>
    </div>
   </div>
  </div>

  <div class="spacer"></div>
  <button id="generate-headings" data-open-text="Google App Engineで広告なしサイト作成の目次を開く ▼"
   data-close-text="Google App Engineで広告なしサイト作成の目次を閉じる ▲">Google App Engineで広告なしサイト作成の目次を開く
   ▼</button><!--目次の自動生成-->

  <div class="spacer"></div>
  <p><a href="site_create.html">個人サイト制作：サイトマップへ戻る</a></p>

  <!-- ●人間用のヘッダーここまで。直下でコンテンツ開始● -->

  <h1 class="background-waveimage-heading"><span>Google App Engineで広告なしサイト作成</span></h1>
  <p>Google App Engineは、あなたのWebサイトやアプリをインターネット上に簡単に公開できるサービス。<br>
   プログラムを書いたら、Googleのサーバーで動かせるようにしてくれます。<br>
   個人サイトを作りたいと思ったら、大きく分けて次の2つが考えられます。</p>

  <ol>
   <li>既存のホームページ作成サービスを使う</li>
   <li>HTMLを初めとするソースコードが書ける場合、クラウドを使う選択肢が出てくる</li>
  </ol>

  <p>ここでお話しするのは、主に後者です。</p>

  <h2>Google App Engineの仕組み</h2>
  <div class="flowerclearfix">
   <div class="flowerfade-out">
    <img src="/flower1/forest1(20).jpg" alt="フェードアウト効果の草花写真">
   </div>
   <p>上記でGoogleのサーバーと書いたけど、App Engineはサーバーとはまた少し違うんですよね。</p>

   <dl>
    <dt>App Engineアプリの設定ファイル</dt>
    <dd>App Engineを使うアプリには、app.yamlという設定ファイルが必要です。<br>
     これはアプリの動作を指示する重要なファイルです。</dd>

    <dt>runtimeエントリ</dt>
    <dd>app.yamlファイルには、少なくとも「runtime（実行環境）」という設定が必要です。<br>
     これはどのプログラミング言語を使うかを指定します。</dd>

    <dt>各サービスの設定</dt>
    <dd>アプリが複数の機能（サービス）を持っている場合、各サービスに専用のapp.yamlファイルが必要です。<br>
     これがそのサービスの設定を行います。</dd>

    <dt>defaultサービスの設定</dt>
    <dd>まず最初にアプリの「default（デフォルト）サービス」に対してapp.yamlファイルを作成します。<br>
     その後、追加のサービスに対してもそれぞれapp.yamlファイルを作成します。</dd>
   </dl>
  </div>

  <h3>runtime（実行環境）</h3>
  <div class="flowerclearfix">
   <div class="flowerfade-out">
    <img src="/flower1/forest1(21).jpg" alt="フェードアウト効果の草花写真">
   </div>
   <p>アプリケーションを実行するために必要な特定の設定や環境のことです。<br>
    これには使うプログラミング言語やフレームワークが含まれます。</p>
   <p>上述しましたが、App Engineは通常のサーバーとは少し違います。<br>
    普通のサーバーは自分で設定や管理をする必要がありますが、App EngineはGoogleが提供する「マネージドサービス」と呼ばれるもので、サーバーの設定や管理をGoogleが行います。<br>
    ユーザーはアプリケーションのコードと設定ファイルを用意するだけで、App Engineが自動的にリソースを割り当ててアプリケーションを実行してくれます。</p>

   <p>簡単に言うと、runtimeを使って「私はこの言語（例えばPythonやJava）でアプリを動かします」とApp Engineに教えることで、App Engineがその言語に合った環境を準備してくれるのです。</p>
  </div>

  <h3>Pythonランタイムでウェブサイトをホスティングする</h3>
  <div class="flowerclearfix">
   <div class="flowerfade-out">
    <img src="/flower1/forest1(22).jpg" alt="フェードアウト効果の草花写真">
   </div>
   <p>App Engine では、pythonランタイムを指定しても静的ウェブサイト（HTMLファイル、CSS、JavaScriptなど）をホスティングできます。<br>
    私のWebサイトはこの仕組みを使っています。<br>
    App Engineは柔軟なアプリケーションホスティングプラットフォームと表現することも可能ですよね。</p>

   <dl>
    <dt>静的ファイルのホスティング</dt>
    <dd>App Engine は、静的ファイル（HTML、CSS、JavaScript、画像など）を効率的に配信する機能があります。</dd>
    <dd>app.yaml ファイルで静的ファイルのディレクトリを指定することで、これらのファイルをアプリの一部として公開できます。</dd>

    <dt>ディフォルトのサービス提供</dt>
    <dd>Pythonランタイムを指定しても、特に Pythonコードが含まれていない場合、静的ファイルをそのまま提供できます。</dd>
    <dd>つまり、Pythonランタイムを使っているという指定は、特定のサーバーサイドコードを実行するためのものであり、静的コンテンツの提供に影響を与えません。</dd>
   </dl>
  </div>

  <p>ここで、シンプルな app.yaml の例を示してみましょう。</p>

  <div class="code-container">
   <pre><code class="language-yaml">
runtime: python
handlers:
- url: /static
static_dir: static/
- url: /.*
script: auto

</code></pre>
  </div>

  <p>この構成では、/static ディレクトリ内のファイルを静的コンテンツとして配信し、その他のURLに対しては自動的にPythonスクリプトを実行します。<br>
   このようにして、App Engine を使用して静的ウェブサイトを簡単にホスティングすることが可能です。</p>

  <div class="flowerclearfix">
   <div class="flowerfade-out">
    <img src="/flower1/forest1(23).jpg" alt="フェードアウト効果の草花写真">
   </div>
   <p>このサイトの場合、Pythonランタイムを指定しているものの、実際には静的なファイルだけを公開している状態です。<br>
    Pythonのコードが実行されていないため ─ 例外はあるけれど ─、Pythonランタイムの設定は単に環境として存在しているだけとなっているんですよね。<br>
    つまり、App EngineではPythonランタイムを指定することで、必要な場合にPythonコードを実行するための環境が用意されますが、実際に提供されているのは静的なファイルということになります。<br>
    この設定の利点は、将来的に動的なPythonコードを追加したい場合にすぐ対応できる柔軟性がある点です。</p>
  </div>

  <h3>App Engine の静的ファイル配信機能</h3>
  <div class="flowerclearfix">
   <div class="flowerfade-out">
    <img src="/flower1/forest1(25).jpg" alt="フェードアウト効果の草花写真">
   </div>
   <p>App Engine は静的ファイルを効率的かつ安全に配信することができるのです。</p>

   <dl>
    <dt>キャッシュ機能</dt>
    <dd>静的ファイルは一度リクエストされると、App Engine がそれをキャッシュに保存します。<br>
     次回のリクエスト時には、キャッシュから高速に配信するため、ロード時間が短縮されます。</dd>

    <dt>圧縮</dt>
    <dd>App Engine は静的ファイルを自動的に圧縮し、配信の効率を上げます。<br>
     ユーザーのデータ転送量が減り、ページの読み込み速度が向上します。</dd>

    <dt>CDN（コンテンツ配信ネットワーク）統合</dt>
    <dd>App Engine は Google の広範なCDNネットワークを活用して、世界中のユーザーに対して低遅延でファイルを配信します。<br>
     地理的に遠くにいるユーザーにも高速にコンテンツを提供できます。</dd>

    <dt>セキュリティ</dt>
    <dd>静的ファイルはHTTPS（SSL/TLS）で配信されるため、データの盗聴や改ざんから守られます。</dd>

    <dt>自動スケーリング</dt>
    <dd>トラフィックが急増してもApp Engine が自動的にリソースをスケーリングして対応します。<br>
     大量のアクセスにも耐えられるようになります。</dd>

    <dt>静的ファイルのマッピング</dt>
    <dd>app.yaml ファイルで静的ファイルのディレクトリを指定することで、特定のURLパスにファイルを簡単にマッピングできます。<br>
     たとえば、 /static フォルダ内のすべてのファイルを /static/* のURLでアクセスできるように設定することができます。</dd>
   </dl>
  </div>

  <h2>個人サイト向けのapp.yaml設定</h2>

  <p>App Engineの「app.yaml」ファイルは、Google App Engineアプリケーションのデプロイや動作に関する重要な情報をまとめて管理するためのものです。<br>
   このファイルには、アプリケーションの動作に関するさまざまな設定が含まれています。</p>

  <p class="gra">参考サイト</p>
  <p><a href="https://yaml.org/">yaml.org</a></p>

  <h3>ランタイムの指定</h3>
  <div class="flowerclearfix">
   <div class="flowerfade-out">
    <img src="/flower1/forest1(26).jpg" alt="フェードアウト効果の草花写真">
   </div>
   <p>使用するプログラミング言語やランタイム環境を指定します。<br>
    app.yamlファイルでは、アプリケーションがどのプログラミング言語やランタイム環境を使うかを指定することができます。<br>
    これをもって、Google App Engineがアプリケーションを正しく実行するための環境を準備することになります。</p>
  </div>

  <p class="gra">プログラミング言語</p>
  <p>アプリケーションが書かれている言語です。<br>
   例えば、Python、Java、Node.jsなどです。</p>

  <p class="gra">ランタイム環境</p>
  <p>アプリケーションを実行するためのソフトウェア環境です。プログラミング言語に対応したランタイムが用意されています。<br>
   例えば、Pythonを使ってアプリケーションを作成している場合、runtime:として記述されることになるでしょう。<br>
   Python 3.9のランタイム環境を使用することを指定すると、Google App EngineはPython 3.9を使ってアプリケーションを実行します。<br>
   同じようにnodejs14などを使うこともできます。<br>
   このように、app.yamlファイルで使用するプログラミング言語やランタイム環境を指定することで、アプリケーションが正しく動作するように設定します。</p>

  <h3>ハンドラの設定</h3>
  <p>URLパスとそれに対応するリクエストハンドラを定義します。<br>
   前述のようにapp.yamlは、Google App Engineでアプリケーションの設定を行うためのファイルです。<br>
   このファイルの中で、「URLパス」と「リクエストハンドラ」を定義します。</p>

  <p class="gra">URLパス</p>
  <p>ユーザーがウェブブラウザに入力するアドレスの一部です。<br>
   例えば、/homeや/aboutなどです。</p>

  <p class="gra">リクエストハンドラ</p>
  <p>特定のURLパスにアクセスがあったときに、そのリクエストを処理するプログラムや関数のことです。<br>
   簡単に言うと、app.yamlファイルで「このURLにアクセスがあったら、このプログラムを実行してね」と指示を出している感じです。<br>
   例えば、次のような設定があったとします。</p>

  <div class="code-container">
   <pre><code class="language-yaml">
# yamlの記述内容
handlers:
- url: /home
 script: home.app
- url: /about
 script: about.app

  </code></pre>
  </div>

  <p>この場合、ユーザーが/homeにアクセスすると、home.appというプログラムが実行され、/aboutにアクセスすると、about.appというプログラムが実行されます。</p>

  <h4>インスタンスの設定</h4>
  <p>インスタンスのスケーリングやクラスを設定します。<br>
   app.yamlファイルでインスタンスのスケーリングやクラスを設定することで、アプリケーションのパフォーマンスを最適化し、コストを管理することができます。</p>

  <p class="gra">インスタンスのスケーリング</p>
  <p>アプリケーションの負荷に応じてインスタンスの数を増減させる仕組みです。<br>
   例えば、アクセスが多いときにはインスタンスを増やし、少ないときには減らすことで、効率的にリソースを使うことができます。</p>

  <p class="gra">インスタンスのクラス</p>
  <p>インスタンスの性能やコストに関する設定です。<br>
   例えば、高性能なインスタンスを使うか、低コストなインスタンスを使うかを選ぶことができます。</p>

  <p>例えば、次のようなことを指定していきます。</p>
  <ul>
   <li>[instance_class: F2]とすれば、F2クラスのインスタンスを使用することを指定しています。F2クラスは、比較的高性能なインスタンスですね。</li>
   <li>[automatic_scaling]とすれば、自動スケーリングの設定です。</li>
   <li>[min_instances: 1]とすれば、最低でも1つのインスタンスを常に稼働させることを指定しています。</li>
   <li>[max_instances: 5]とすれば、最大で5つのインスタンスまで増やすことができることを指定しています。</li>
  </ul>

  <h4>環境変数の設定</h4>
  <p>アプリケーションで使用する環境変数を定義します。<br>
   環境変数を使うことで、アプリケーションのコードを変更せずに設定情報を変更することができます。<br>
   セキュリティが向上し、設定の管理が簡単になります。</p>

  <p class="gra">環境変数</p>
  <p>アプリケーションが動作する際に必要な設定情報を外部から渡すためのものです。<br>
   例えば、データベースの接続情報やAPIキーなど、アプリケーションのコードに直接書きたくない情報を環境変数として設定します。</p>

  <p class="gra">app.yaml</p>
  <p>ファイルで環境変数を定義することで、これらの情報を簡単に管理できます。</p>

  <p>例えば、DATABASE_URL:
   "mysql://user:password@localhost/dbname"としてデータベースの接続情報を指定します。この情報を使って、アプリケーションはデータベースに接続します。<br>
   APIについてはAPI_KEY: "your-api-key-here"と書くことで、外部のサービスを利用するためのAPIキーを指定します。このキーを使って、アプリケーションは外部サービスにアクセスします。</p>

  <h4>静的ファイルとディレクトリを設定する方法</h4>
  <p class="gra">静的ファイルの設定</p>
  静的ファイルを提供するためには、app.yamlファイルにstatic_filesまたはstatic_dirを使用してハンドラを定義します。

  <h5>static_filesの使用例</h5>
  static_filesを使用すると、特定のファイルパターンに一致するファイルを提供できます。

  <div class="code-container">
   <pre><code class="language-yaml">
# yamlの記述内容
- url: /static(.*)
 static_files: static/\1
 upload: static/(.*)
  </code></pre>
  </div>

  <p><strong>(.*)</strong><br>
   これは正規表現のパターンで、任意の文字列（0文字以上）にマッチします。<br>
   括弧で囲まれているため、キャプチャグループとして機能します。<br>
   つまり、マッチした部分を後で参照できるように保存します。</p>

  <p><strong>\1</strong><br>
   これはキャプチャグループの参照です。<br>
   正規表現のパターンで最初にキャプチャされたグループ（この場合は(.*)）を指します。<br>
   \1は最初のキャプチャグループ、\2は2番目のキャプチャグループ、というように続きます。</p>

  <p class="gra">url: /static/(.*):</p>
  <p>/static/に続く任意の文字列にマッチします。<br>
   例えば、/static/image.pngや/static/css/style.cssなどです。</p>

  <p class="gra">static_files: static/\1:</p>
  <p>マッチしたURLのパスの部分（(.*)）をstatic/ディレクトリ内の対応するファイルにマッピングします。<br>
   例えば、/static/image.pngがリクエストされた場合、static/image.pngファイルが提供されます。</p>

  <p class="gra">upload: static/(.*):</p>
  <p>App Engineにアップロードされるファイルのパスを指定します。<br>
   static/ディレクトリ内の任意のファイルがアップロード対象となります。<br>
   この設定があることで、/static/に続く任意のパスがstaticディレクトリ内の対応するファイルにマッピングされ、App Engineにアップロードされるファイルも同様に指定されます。</p>

  <h5>static_dirの使用例</h5>
  <p>static_dirを使用すると、ディレクトリ全体を静的ファイルとして提供できます。</p>

  <div class="code-container">
   <pre><code class="language-yaml">
# yamlの記述内容
- url: /static
 static_dir: static
  </code></pre>
  </div>

  <p>この例では、/static URLに一致するリクエストがstaticディレクトリ内のファイルにマッピングされます。</p>

  <h2>app.yamlの構文例</h2>
  <p><span class="small-orange-text">下記コードのコピペはお勧めできません。</span></p>
  <p>Webアプリケーションのレベルやアクセス数によっては費用がかかる可能性がありますよ。<br>
   あくまでも私の環境に沿った上でのコードですし、頻繁に変更しています。<br>
   ちゃんと意味を理解してから書いた方が良いです。
  </p>
  <p class="codegra" id="app_yaml">Google App Engine の app.yaml</p>
  <div class="code-container">
   <pre><code class="language-yaml">
runtime: python312
instance_class: F1
env: standard

runtime_config:
  document_root: www

automatic_scaling:
  min_idle_instances: 0
  max_idle_instances: 3
  max_concurrent_requests: 200

handlers:
- url: /
  static_files: www/index.html
  upload: www/index.html

- url: /favicon.ico
  static_files: www/favicon.ico
  upload: www/favicon.ico

- url: /(.*)
  static_files: www/\1
  upload: www/(.*)

</code></pre>
  </div>

  <h4>YAML 設定ファイルの説明</h4>
  <div class="flowerclearfix">
   <div class="flowerfade-out">
    <img src="/flower1/forest1(301).jpg" alt="フェードアウト効果の草花写真">
   </div>
   <p><span class="codecolor">1. runtime: python312</span><br>
    使用するランタイム環境を指定します。<br>
    私の場合、Python 3.12 を使用しています。</p>

   <p><span class="codecolor">2. instance_class: F1</span><br>
    使用するインスタンスのクラスを指定します。<br>
    <span class="codecolor">F1</span> クラスのインスタンスを使用しています。<br>
    これは無料の低トラフィック用インスタンスクラスです。
   </p>

   <p><span class="codecolor">3. env: standard</span><br>
    環境を標準環境として指定します。</p>

   <p><span class="codecolor">4. runtime_config:</span><br>
    ランタイムの設定情報を定義するセクションです。</p>
   <p><span class="codecolor">document_root: www</span><br>
    ドキュメントルートを指定しています。<br>
    私の場合、アプリケーションのルートディレクトリが <span class="codecolor">www</span> フォルダです。</p>

   <p><span class="codecolor">5. automatic_scaling:</span><br>
    自動スケーリングの設定を指定するセクションです。</p>
   <ul>
    <li><span class="codecolor">min_idle_instances: 0</span><br>
     最小アイドルインスタンス数を 0 に設定します。<br>
     インスタンスがアイドル状態になったとき、それを保持する最小の数です。</li>
    <li><span class="codecolor">max_idle_instances: 3</span><br>
     最大アイドルインスタンス数を 3 に設定します。<br>
     インスタンスがアイドル状態になったとき、それを保持する最大の数です。</li>
    <li><span class="codecolor">max_concurrent_requests: 200</span><br>
     1 つのインスタンスで同時に処理できるリクエストの最大数を 200 に設定します。</li>
   </ul>
  </div>

  <p><span class="codecolor">6. handlers:</span><br>
   URL ハンドラーのリストを定義するセクションです。<br>
   各ハンドラーが特定の URL パターンに対してどのような操作を行うかを指定します。</p>
  <ul>
   <li>
    <span class="codecolor">url: /</span><br>
    <span class="codecolor">/</span> に一致する URL に対するハンドラーを指定します。
    <ul>
     <li><span class="codecolor">static_files: www/index.html</span><br>
      静的ファイル <span class="codecolor">www/index.html</span> を提供します。</li>
     <li><span class="codecolor">upload: www/index.html</span><br>
      GAE にデプロイするときに <span class="codecolor">www/index.html</span> をアップロードします。</li>
    </ul>
   </li>
   <li>
    <span class="codecolor">url: /favicon.ico</span><br>
    <span class="codecolor">/favicon.ico</span> に一致する URL に対するハンドラーを指定します。
    <ul>
     <li><span class="codecolor">static_files: www/favicon.ico</span><br>
      静的ファイル <span class="codecolor">www/favicon.ico</span> を提供します。</li>
     <li><span class="codecolor">upload: www/favicon.ico</span><br>
      GAE にデプロイするときに <span class="codecolor">www/favicon.ico</span> をアップロードします。</li>
    </ul>
   </li>
   <li>
    <span class="codecolor">url: /(.*)</span><br>
    任意の URL に一致するハンドラーを指定します。<br>
    正規表現 <span class="codecolor">(.*)</span> を使用して、どの URL にもマッチさせます。
    <ul>
     <li><span class="codecolor">static_files: www/\1</span><br>
      URL に対応するファイルを <span class="codecolor">www</span> フォルダから提供します。</li>
     <li><span class="codecolor">upload: www/(.*)</span><br>
      GAE にデプロイするときに <span class="codecolor">www</span> フォルダ内の任意のファイルをアップロードします。</li>
    </ul>
   </li>
  </ul>

  <h2>個人サイトをクラウドサービスで公開する</h2>
  <div class="flowerclearfix">
   <div class="flowerfade-out">
    <img src="../flower1/flower1(34).JPG" alt="フェードアウト効果の草花写真">
   </div>
   <p>Azureならほとんど専用サービスとも言える「<a href="https://azure.microsoft.com/ja-jp/products/app-service/static">Azure Static
     Web Apps</a>」というプロダクトがあるんですよね。<br>
    HTML、CSS、JavaScriptなどの静的コンテンツを簡単にデプロイし、グローバルに配信するためのサービスとなります。</p>
   <p>GCPだと「<a href="https://firebase.google.com/docs/hosting?hl=ja">Firebase Hosting</a>」もあって、これでも良いと思います。<br>
    私がひとまずGoogle App Engineを選んだのは、App Engineのほうが歴史が長く、専門書の出版数も多いからです。<br>
    FirebaseはGoogleに買収され、その後でFirebase Hostingが導入されたんだよね。</p>
   <p>AWSにも「<a href="https://aws.amazon.com/jp/amplify/">AWS Amplify</a>」というのがありますよ。<br>
    静的ウェブサイトやシングルページアプリケーション（SPA）のホスティングを提供し、グローバルCDN、カスタムドメイン、継続的デプロイなどの機能を備えています。</p>
  </div>

  <p>個人サイトについてX（旧Twitter）でよく話題になるhtml・css・JavaScriptというのは、要するにフロントエンドに関するコードなんですよね。<br>
   バックエンドは、例えば私がローカルサーバーを立てるのにインストールしたPythonなんかがそうです。<br>
   それで、ここでお話ししているクラウドというのは…一言で書くのは極めて難しいですが、インフラと言えば良いでしょうか。<br>
   個人サイト作るだけなのにサーバー実機なんか買わないでしょ？</p>

  <h2>ホスティング先のクラウド選び</h2>
  まずは料金が安いGoogle Cloudから探してみるのがいいんじゃないかな。<br>
  私は次のようにして、ひとまずApp Engineを試しています。
  <ol>
   <li><a href="https://cloud.google.com/?hl=ja">Google Cloud</a>からプロダクトを選択。より詳しくやりたいことが具体的になっている場合は<a
     href="https://cloud.google.com/products?hl=ja#featured-products/">Google Cloud プロダクト</a></li>
   <li>大項目を選択する。─ ここではサーバーレスを選択します。なぜサーバーレスなのかですが、<a
     href="https://cloud.google.com/docs/application-hosting?hl=ja">アプリケーション
     ホスティングの概要</a>に詳しく書いてあります。いきなりIaaSを検討しなくて良いでしょう。 ─</li>
   <li>Cloud Run・Cloud Functions・App Engine・Workflows・API Gatewayをさっと見てから…</li>
   <li><a href="https://cloud.google.com/docs/get-started/aws-azure-gcp-service-comparison?hl=ja">AWS サービスや Azure
     サービスと Google Cloud を比較する</a>で似たようなサービスをそれぞれ調べる。</li>
   <li>それらのプロダクトの中から、自分のニーズにあったものを選ぶ。</li>
  </ol>


  <h2>レンタルサーバー VS クラウドサービス</h2>
  <p>やってることは似たようなもんだと思うんですけどね。<br>
   AWS、GCP、Azureなどのクラウドサービスの台頭は、レンタルサーバー業界に大きな影響を与えています。<br>
   これらのクラウドサービスは、スケーラビリティ、柔軟性、コスト効率の面で優れており、多くの企業や個人が従来のレンタルサーバーから移行する要因となっているんですよね。</p>

  <h5>コストで比べる</h5>
  <p>クラウドサービスは従量課金制や無料の初期利用枠を提供しており、初期コストを抑えたいユーザーにとって魅力的です。<br>
   私なんか思いっきりこのタイプですよ。<br>
   クラウドにホスティングすれば、無料で広告無しの自由自在なWebサイトにできるのです。</p>

  <h5>技術で比べる</h5>
  <p>クラウドサービスは最新の技術を迅速に取り入れることができ、セキュリティやパフォーマンスの面でも優れています。<br>
   さすがにAWS、GCP、Azureのクラウドですからね。</p>

  <h5>運用の簡便さで比較する</h5>
  <p>クラウドサービスは、インフラの管理を自動化するツールやサービスを提供しており、ユーザーはより簡単に運用できます。<br>
   開発環境を整えるために個人でハイスペックPCを用意する必要がないのですよ。<br>
   私はずっとロースペックパソコンでWeb書いてます。</p>

  <h5>市場の変化</h5>
  <p>個人サイトを作る人が減少し、SNSやブログサービスの利用が増えていることも影響していますね。<br>
   私が「<a href="freesite.html">無料＆格安でWebサイトを作る</a>」にてお勧めしている Google Sites はホームページ作成サービス、Blogger はブログサービスです。<br>
   それで、イーロンマスクによってXの将来が不透明になってきたから、昔のように個人サイトが注目されるようになってきたという流れです。</p>

  <p>おそらく、これからも昔ながらの「レンタルサーバー」は、１つまた１つとサービス終了していくのではないかと。<br>
   その頃にはAWS、GCP、AzureなどのクラウドサービスがもっとIT初心者にも使いやすくなっていることでしょう。</p>


  <h3>App Engine以外でもWebサイトを公開できる</h3>
  <p>Google Cloud Storageを使用して静的ウェブサイトをホスティングすることもできます。<br>
   静的コンテンツ（HTML、CSS、JavaScriptなど）をホストするのに適しており、ウェブサイトのファイルをバケットにアップロードし、公開設定を行うだけで簡単にホスティングできます。</p>
  <div class="flowerclearfix">
   <div class="flowerfade-out">
    <img src="../flower1/flower1(128).JPG" alt="フェードアウト効果の草花写真">
   </div>
   <p>Google Cloudの「Cloud Run」と「App Engine」はどちらもサーバーレスのコンピューティングサービスです。<br>
    Cloud Runはコンテナベースで任意の言語やライブラリを使用できます。<br>
    リクエストに応じて自動的にスケールし、アイドル状態ではゼロまでスケーリングダウンします。<br>
    そのため、使用したリソースに基づいて課金され、アイドル状態のコストは低く抑えられます。</p>
  </div>

  <p>一方、App EngineはPaaS（Platform as a Service）です。<br>
   アプリケーションコードをデプロイするだけでインフラの管理をGoogleに任せることができます。<br>
   スタンダード環境とフレキシブル環境があります。<br>
   スタンダード環境は自動スケーリング、フレキシブル環境はカスタマイズ可能なインフラを提供します。<br>
   ソースコードを直接デプロイでき、特定のランタイム環境を選択するだけで動作します。<br>
   しかし、インスタンスベースの課金モデルでアイドル状態でも一定のコストが発生します。</p>

  <p>静的ウェブサイトのホスティングに関しては、Cloud Runはコンテナを使用します。<br>
   静的ファイルを含むコンテナイメージを作成し、それをデプロイすることでホスティングが可能です。<br>
   スケーリングの柔軟性とコスト効率の面で優れているんですよね。<br>
   一方、App Engineは特にスタンダード環境での静的ファイルのホスティングが簡単で設定も少なく済みます。<br>
   しかし、アイドル状態のコストが発生する点に注意が必要です。</p>

  <p>とはいえ、標準環境であれば無料枠があるわけです。<br>
   総合的に見ると、静的ウェブサイトのホスティングにはCloud Runがより適しているように思えますが、どちらのサービスも優れた機能を持っているため、具体的なニーズに応じて選択することが重要です。</p>

  <h4>クラウドサービスには無料枠がある</h4>
  <p>ここで、無料枠の話をしましょう。<br>
   静的ウェブサイトのホスティングに関して、例えば上述のGoogle Cloud RunとGoogle App Engineの無料枠を比較する場合、次のような事柄を考慮する必要があります。</p>

  <p><strong>Google Cloud Run</strong></p>
  <ul>
   <li>CPU時間: 毎月最初の180,000 vCPU秒</li>
   <li>メモリ使用量: 毎月最初の360,000 GiB秒</li>
   <li>リクエスト数: 毎月最初の200万リクエスト</li>
   <li>ネットワーク: 北米内の下り（外向き）トラフィックは1GBまで無料</li>
  </ul>

  <p><strong>Google App Engine</strong></p>
  <ul>
   <li>インスタンス時間: Standard環境で1日あたり28インスタンス時間</li>
   <li>ネットワーク: 下り（外向き）トラフィックが1GB/日</li>
   <li>Cloud Storage: 5GBの無料ストレージ</li>
  </ul>

  <p><strong>比較ポイント</strong></p>
  <ul>
   <li>トラフィック: App Engineは1日あたり1GBの下りトラフィックが無料で、Cloud Runは月あたり1GBです。頻繁にアクセスされるサイトならApp Engineが有利です。</li>
   <li>インスタンス時間: App Engineは1日あたり28インスタンス時間が無料で、Cloud RunはCPU時間で計算されます。短時間で多くのリクエストがある場合はCloud Runが有利です。</li>
   <li>ストレージ: App Engineには5GBの無料ストレージが含まれていますが、Cloud Runにはストレージが含まれていません。</li>
  </ul>

  <p>静的ウェブサイトのホスティングに関しては、アクセス頻度や必要なリソースに応じて選ぶと良いでしょう。</p>
  <p>頻繁にアクセスされるサイトならApp Engine<br>
   短時間で多くのリクエストがある場合はCloud Run<br>
   これは目安に過ぎませんが、私の場合、旬な話題や時事ネタなど、浮き沈みが激しいものは避けています。<br>
   よって、App Engineが有利であろうと判断してるんだよね。</p>


  <!-- ●ここから人間用のフッター● -->
  <hr id="feinhr">
  <div class="spacer"></div>

  <section class="sitemap">
   <h2 class="sitemap_heading">サイトマップ</h2>
   <p><a href="/pages/pagelist">全ページをリスト化したサイトマップ</a>も用意していますが、けっこうなページ数があります。<br>
下記の「カテゴリー分けサイトマップ」のほうが使いやすいでしょう。</p>
   <p><a href="/another-eden/anaden_sitemap.html"><i class="fas fa-sitemap"></i>
     アナザーエデン関連ページ・サイトマップ</a></p>
   <p>アナザーエデンの強敵戦やストーリーコンテンツのリスト、お勧めバッジなどを掲載したコーナーです。<br>
    期間限定のない普通のRPGですので、初心者でも安心して続けていけるゲームとなっています。<br>
    もっとも重要なグラスタについては、場所別に網羅した表があります。</p>


   <div class="spacer"></div>
   <p><a href="/contents/site_create.html"><i class="fas fa-sitemap"></i>
     個人サイトのホスティングとコンテンツ作成</a></p>
   <p>個人でウェブサイトを作るにはどうすればいいか。<br>
    HTML・CSS・JavaScriptの書き方はもちろん、無料かつ広告なしでホームページを作る方法を掲載したコーナーです。<br>
    Webデザインやレイアウトについても書いてあります。</p>
   <div class="spacer"></div>
   <p><a href="/fish/fish_sitemap.html"><i class="fas fa-sitemap"></i>魚釣りなどアウトドアのエリア</a></p>
   <p>ゲームとパソコンだけじゃなく、アウトドアも趣味なんです。<br>
    このコーナーでは魚釣りの記録とか、魚料理のレシピ、はたまたサイクリングなどなど。<br>
    アウトドアに関連するコンテンツが詰め込まれています。</p>

  </section>

  <!-- ページ上部へ戻るボタン -->
  <button id="scrollToTopBtn" onclick="scrollToTop()">ページ上部へ戻る</button>
  <script src="/script/feinScroll.js"></script>

  <div class="spacer"></div>

  <footer>
   <!--common google digital leader-->

   <div id="commongdl"></div>
   <script src="/externalization/common.js"></script>

   <div class="spacer"></div>

   <!--w3cバリデーターに合格していることを示す-->
   <div class="w3ccheck">
    <a href="https://validator.w3.org/nu/?doc=https://feinatelier.org/contents/appengine.html">
     <img src="/image/HTML5_Logo_64.png" alt="Valid HTML5" height="31" style="width: auto;">
    </a>
    <a href="https://validator.w3.org/nu/?doc=https://feinatelier.org/css/style.css">
     <img style="border:0;width:88px;height:31px" src="/image/vcss-blue.png" alt="正当なCSSです!">
    </a>
   </div>
   <!--w3cバリデーターに合格していることを示す-->

   <div class="spacer"></div>
   <p class="portal" id="updated-date">この <a href="https://feinatelier.org/">fein's personal
     site</a> は、2023/7/4に開設された <a href="https://portal.feinatelier.org/">fein's portal</a>
    を母体として、yyyy/mm/ddに至るまで更新し続けられています。</p>
   <script>
    document.addEventListener('DOMContentLoaded', function () {
     const today = new Date();
     const year = today.getFullYear();
     const month = String(today.getMonth() + 1).padStart(2, '0');
     const day = String(today.getDate()).padStart(2, '0');
     const dateElement = document.getElementById('updated-date');
     dateElement.innerHTML = `この <a href="https://feinatelier.org/">fein's personal site</a> は、2023/7/4に開設された <a href="https://portal.feinatelier.org/">fein's portal</a> を母体として、${year}/${month}/${day}に至るまで更新し続けられています。`;
    });
   </script>

  </footer>

 </div><!--レスポンシブデザイン-->

 <script src="/script/feinheadline1.js"></script><!--見出しの自動生成-->

 <!-- ●ここまで人間用のフッター。直下でbodyを閉める● -->
</body>

</html>
